(function(){"use strict";var t={2159:function(t,e,n){var o=n(9963),a=n(6252);function i(t,e){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var s=n(3744);const l={},r=(0,s.Z)(l,[["render",i]]);var c=r,u=n(2201);const d=(0,a._)("h1",{class:"my-5 primary"},"Annotation App",-1),m={class:"mt-3 d-grid gap-2"};function p(t,e,n,o,i,s){return(0,a.wg)(),(0,a.iD)(a.HY,null,[d,(0,a._)("div",m,[(0,a._)("div",{class:"btn btn-outline-dark p-5 my-3 fs-3 font-weight-bold",onClick:e[0]||(e[0]=(...t)=>s.moveToCreate&&s.moveToCreate(...t))},"アノテーション作成"),(0,a._)("div",{class:"btn btn-outline-dark p-5 my-3 fs-3 font-weight-bold",onClick:e[1]||(e[1]=(...t)=>s.moveToShow&&s.moveToShow(...t))},"アノテーション編集・ダウンロード")])],64)}n(7658);var h={data(){return{}},methods:{moveToCreate(){this.$router.push({path:"/create"})},moveToShow(){this.$router.push({path:"/show"})}}};const f=(0,s.Z)(h,[["render",p]]);var _=f;const b=(0,a._)("h1",{class:"my-5 primary"},"アノテーションを作成",-1),g={key:0,class:"alert-success py-3 my-3"},v={key:1,class:"alert-danger py-3 my-3"},y={class:"form"},k={class:"form-group row my-3"},w=(0,a._)("label",{for:"annotationName",class:"col-sm-2 col-form-label"},"アノテーション名",-1),C={class:"col-sm-10"},j={key:0},S={class:"form-group row my-3"},x=(0,a._)("label",{for:"csvFile",class:"col-sm-2 form-label"},"CSVファイルの選択",-1),A={class:"col-sm-10"},T={key:1},F={class:"form-group row my-3"},D=(0,a._)("label",{for:"imageFile",class:"col-sm-2 form-label"},"画像ファイルの選択",-1),O={class:"col-sm-10"},Z={class:"check_image"},E={key:0,class:"warn alert-danger py-3 my-3"},I={class:"custom-control custom-checkbox my-3"},z=(0,a._)("label",{class:"checkbox_text custom-control-label",for:"imageFlg"},"画像比較で登録",-1),L={class:"mt-3 d-grid gap-2"},R={class:"mt-3 d-grid gap-2"},V=["disabled"];function $(t,e,n,i,s,l){return(0,a.wg)(),(0,a.iD)("div",null,[b,s.annotation_id?((0,a.wg)(),(0,a.iD)("div",g,"SUCCESS")):(0,a.kq)("",!0),s.error&&!s.annotation_id?((0,a.wg)(),(0,a.iD)("div",v," ERROR ")):(0,a.kq)("",!0),(0,a._)("section",y,[(0,a._)("div",k,[w,(0,a._)("div",C,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"annotationName","onUpdate:modelValue":e[0]||(e[0]=t=>s.annotation_name=t),placeholder:"Annotation Name"},null,512),[[o.nr,s.annotation_name]])])]),s.isImage?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",S,[x,(0,a._)("div",A,[(0,a._)("input",{class:"form-control",type:"file",id:"csvFile",name:"",placeholder:"CSVファイルを入力してください",onChange:e[1]||(e[1]=(...t)=>l.onFileChange&&l.onFileChange(...t))},null,32)])])])),s.isImage?((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("div",F,[D,(0,a._)("div",O,[(0,a._)("input",{class:"form-control",type:"file",accept:"application/zip,application/x-zip-compressed",id:"imageFile",name:"",placeholder:"画像ファイルをzip形式で圧縮して入力したください",onChange:e[2]||(e[2]=(...t)=>l.onFileChange&&l.onFileChange(...t))},null,32)])])])):(0,a.kq)("",!0),(0,a._)("div",Z,[s.isImage?((0,a.wg)(),(0,a.iD)("div",E," ※画像はzipファイルに圧縮してから送信してください ")):(0,a.kq)("",!0),(0,a._)("div",I,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"custom-control-input","onUpdate:modelValue":e[3]||(e[3]=t=>s.isImage=t),name:"",id:"imageFlg"},null,512),[[o.e8,s.isImage]]),z])]),(0,a._)("div",L,[(0,a._)("button",{class:"btn btn-dark mt-3 fs-3 font-weight-bold",onClick:e[4]||(e[4]=(...t)=>l.save&&l.save(...t))}," 送信 ")])]),(0,a._)("div",R,[(0,a._)("button",{class:"btn btn-outline-dark fs-3 font-weight-bold",onClick:e[5]||(e[5]=(...t)=>l.backToHome&&l.backToHome(...t)),disabled:s.isSaving}," メニューへ戻る ",8,V)])])}var H=n(8433);const J="";var N={data(){return{uploaded_file:null,uploaded_zip:null,annotation_name:"",file:null,isSaving:!1,annotation_id:null,error:!1,error_msg:"",isImage:!1}},methods:{async onFileChange(t){let e=t.target.files[0];this.file=e,this.createFile(e)},async createFile(t){var e=new FileReader;e.onload=t=>{this.uploaded_file=t.target.result},e.readAsDataURL(t)},onZipFileChange(t){let e=t.target.files[0];this.file=e,this.createZipFile(e)},async createZipFile(t){var e=new FileReader;e.onload=t=>{this.uploaded_zip=t.target.result},e.readAsDataURL(t)},async save(){this.isSaving=!0;const t=new FormData;t.append("file",this.uploaded_file),t.append("title",this.annotation_name),this.isImage&&t.append("image",this.uploaded_zip),t.append("isImage",+this.isImage);try{const e=await H.Z.post(J+"/api/reg_file",t,{headers:{"Content-Type":"multipart/form-data"}});this.annotation_id=e.data}catch(e){this.error=!0}finally{this.isSaving=!1}},backToHome(){this.$router.push({path:"/"})}}};const U=(0,s.Z)(N,[["render",$]]);var q=U,P=n(3577);const Y=(0,a._)("h1",{class:"my-3 primary"},"アノテーション一覧",-1),G={class:"table"},M=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"作成日"),(0,a._)("th",null,"名前"),(0,a._)("th",null,"編集"),(0,a._)("th",null,"CSV作成"),(0,a._)("th",null,"CSVダウンロード"),(0,a._)("th",null,"削除")])],-1),B=["onClick"],K=["onClick"],Q=["onClick"],W=["onClick"],X={class:"mt-3 d-grid gap-2"};function tt(t,e,n,o,i,s){return(0,a.wg)(),(0,a.iD)(a.HY,null,[Y,(0,a._)("table",G,[M,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.annotation_list,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",null,(0,P.zw)(e),1),(0,a._)("td",null,(0,P.zw)(t.generated_time),1),(0,a._)("td",null,(0,P.zw)(t.annotation_name),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-outline-dark",onClick:e=>s.moveToEdit(t.annotation_id)}," 編集 ",8,B)]),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-outline-dark",onClick:e=>s.createResult(t.annotation_id)}," 作成 ",8,K)]),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-outline-dark",onClick:e=>s.getCSV(t.annotation_id)}," ダウンロード ",8,Q)]),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-outline-dark",onClick:n=>s.deleteAnnotation(t.annotation_id,e)}," 削除 ",8,W)])])))),128))])]),(0,a._)("div",X,[(0,a._)("button",{class:"btn btn-outline-dark fs-3 font-weight-bold mt-3 mb-5",onClick:e[0]||(e[0]=(...t)=>s.backToHome&&s.backToHome(...t))}," メニューへ戻る ")])],64)}var et=n(6884),nt=n.n(et),ot=n(8874);const at="https://ycvac6onu1.execute-api.us-east-1.amazonaws.com/prod/",it="";var st={data(){return{annotation_list:[],error:!1}},methods:{async getAllAnotation(){try{const t=await H.Z.get(at+"annotation");this.annotation_list=JSON.parse(t.data.annotation_table_data)}catch(t){console.log(t),(0,ot.Am)(t,{autoClose:1e3}),this.error=!0}},moveToEdit(t){this.$router.push({path:"/edit/"+t})},createResult(t){H.Z.post(at+"result",{annotation_id:t}).then((()=>{})).catch((t=>{(0,ot.Am)(t.message),console.log(t)}))},async getCSV(t){try{const e=await H.Z.get(it+`/api/get_csv?annotationId=${t}`,{responseType:"blob"}),n=e.headers["content-type"],o=e.headers["content-disposition"],a=new Blob([e.data],{type:n});nt().saveAs(a,o)}catch(e){console.log(e),(0,ot.Am)("csvファイルが存在しません",{autoClose:1e3})}},backToHome(){this.$router.push({path:"/"})},removeAnnotationFromList(t){this.annotation_list.splice(t,1)},async deleteAnnotation(t,e){const n=confirm("id:"+t+"を削除してもよろしいですか？");if(console.log(!n),n)try{const n=await H.Z.post(at+"annotation/"+t);if(200!=n.status)throw Error("通信エラーが発生しました\nresponse: \n"+n);this.removeAnnotationFromList(e),(0,ot.Am)("削除に成功しました")}catch(o){console.log(o),(0,ot.Am)("削除時にエラーが発生しました")}}},created(){this.getAllAnotation()},computed:{showArray(){const t=this.annotation_list.length>50?50:this.annotation_list.length-1,e=this.annotation_list.slice(0,t);return e}}};const lt=(0,s.Z)(st,[["render",tt]]);var rt=lt;const ct=(0,a._)("h1",{class:"my-3 primary"},"アノテーション",-1),ut={key:0,class:"edit_area"},dt={class:"mt-3 mb-5 d-grid gap-2"},mt=["disabled"];function pt(t,e,n,o,i,s){const l=(0,a.up)("EditJob"),r=(0,a.up)("EditImageJob");return(0,a.wg)(),(0,a.iD)(a.HY,null,[ct,i.jobList?((0,a.wg)(),(0,a.iD)("div",ut,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.jobList,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"form"},[t.isImage?((0,a.wg)(),(0,a.j4)(r,{key:1,index:e,job:t,onSave:e=>s.getResult(t,e)},null,8,["index","job","onSave"])):((0,a.wg)(),(0,a.j4)(l,{key:0,index:e,job:t,onSave:e=>s.getResult(t,e)},null,8,["index","job","onSave"]))])))),128)),(0,a._)("div",dt,[(0,a._)("button",{class:"btn btn-dark mt-3 fs-3 font-weight-bold",onClick:e[0]||(e[0]=(...t)=>s.sendJob&&s.sendJob(...t)),disabled:i.isSending}," 送信 ",8,mt)])])):(0,a.kq)("",!0)],64)}const ht={class:"form my-5"},ft={class:"form-group"},_t={class:"form-check"},bt=["name"],gt={class:"form-check-label mx-5",for:"check1"},vt={class:"form-group"},yt={class:"form-check"},kt=["name"],wt={class:"form-check-label mx-5",for:"check1"};function Ct(t,e,n,i,s,l){return(0,a.wg)(),(0,a.iD)("form",ht,[(0,a._)("div",ft,[(0,a._)("div",_t,[(0,a.wy)((0,a._)("input",{class:"form-check-input mx-3",style:{transform:"scale(2.0)"},type:"radio",name:"check_job"+n.index,value:"0",id:"check1","onUpdate:modelValue":e[0]||(e[0]=t=>s.result_str=t),onClick:e[1]||(e[1]=t=>l.save(0))},null,8,bt),[[o.G2,s.result_str]]),(0,a._)("label",gt,(0,P.zw)(n.job.content_0),1)])]),(0,a._)("div",vt,[(0,a._)("div",yt,[(0,a.wy)((0,a._)("input",{class:"form-check-input mx-3",style:{transform:"scale(2.0)"},type:"radio",name:"check_job"+n.index,value:"1","onUpdate:modelValue":e[2]||(e[2]=t=>s.result_str=t),onClick:e[3]||(e[3]=t=>l.save(1))},null,8,kt),[[o.G2,s.result_str]]),(0,a._)("label",wt,(0,P.zw)(n.job.content_1),1)])])])}var jt={props:{index:{type:Number},job:{type:Object}},data(){return{result_str:null}},methods:{save(t){const e=this.result===t?null:t;this.unSelected(t),this.$emit("save",e)},unSelected(t){this.result_str&&this.result_str===`${t}`&&(this.result_str=null)}},computed:{result(){return this.result_str?+this.result_str:null}}};const St=(0,s.Z)(jt,[["render",Ct],["__scopeId","data-v-b859b9bc"]]);var xt=St;const At={class:"form"},Tt=["name"],Ft={class:"image_container"},Dt=["src"],Ot=["name"],Zt={class:"image_container"},Et=["src"];function It(t,e,n,i,s,l){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",At,[(0,a.wy)((0,a._)("input",{type:"radio",name:"check_job"+n.index,value:"0","onUpdate:modelValue":e[0]||(e[0]=t=>s.result_str=t),onClick:e[1]||(e[1]=t=>l.save(0))},null,8,Tt),[[o.G2,s.result_str]]),(0,a._)("div",Ft,[(0,a._)("img",{class:"image",src:n.job.content_0,alt:""},null,8,Dt)]),(0,a.wy)((0,a._)("input",{type:"radio",name:"check_job"+n.index,"onUpdate:modelValue":e[2]||(e[2]=t=>s.result_str=t),value:"1",onClick:e[3]||(e[3]=t=>l.save(1))},null,8,Ot),[[o.G2,s.result_str]]),(0,a._)("div",Zt,[(0,a._)("img",{class:"image",src:n.job.content_1,alt:""},null,8,Et)])])])}var zt={props:{index:{type:Number,default:null},job:{type:Object,default:()=>({})}},data(){return{result_str:null}},methods:{save(t){const e=this.result===t?null:t;this.unSelected(t),this.$emit("save",e)},unselected(t){this.result_str&&this.result_str===`${t}`&&(this.result_str=null)}},computed:{result(){return this.result_str?+this.result_str:null}}};const Lt=(0,s.Z)(zt,[["render",It],["__scopeId","data-v-7f1e7328"]]);var Rt=Lt;const Vt="https://ycvac6onu1.execute-api.us-east-1.amazonaws.com/prod/";var $t={components:{EditJob:xt,EditImageJob:Rt},data(){return{jobList:[],isSending:!1}},methods:{getResult(t,e){t.result=e},async getJob(t){const e=await H.Z.get(Vt+"job?annotation_id="+t);console.log(e),this.jobList=[this.jobList,...e.data.response_list]},async sendJob(){this.isSending=!0;try{const t=await H.Z.patch(Vt+"job",{response_list:this.jobList});console.log(t)}catch(t){alert("エラーが発生しました")}finally{this.isSending=!1}}},async created(){const t=this.$route.params.annotation_id;await this.getJob(t),this.$nextTick((function(){}))}};const Ht=(0,s.Z)($t,[["render",pt]]);var Jt=Ht;const Nt=[{path:"/",name:"home",component:_},{path:"/about",name:"about",component:()=>n.e(443).then(n.bind(n,7381))},{path:"/create",name:"create",component:q},{path:"/show",name:"show",component:rt},{path:"/edit/:annotation_id",name:"edit",component:Jt}],Ut=(0,u.p7)({history:(0,u.PO)("/"),routes:Nt});var qt=Ut;(0,o.ri)(c).use(qt).mount("#app")}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,a,i){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],i=t[u][2];for(var l=!0,r=0;r<o.length;r++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[r])}))?o.splice(r--,1):(l=!1,i<s&&(s=i));if(l){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"static/js/about.2624cf3d.js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="frontend:";n.l=function(o,a,i,s){if(t[o])t[o].push(a);else{var l,r;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+i){l=d;break}}l||(r=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",e+i),l.src=o),t[o]=[a];var m=function(e,n){l.onerror=l.onload=null,clearTimeout(p);var a=t[o];if(delete t[o],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(t){return t(n)})),e)return e(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),r&&document.head.appendChild(l)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t={143:0};n.f.j=function(e,o){var a=n.o(t,e)?t[e]:void 0;if(0!==a)if(a)o.push(a[2]);else{var i=new Promise((function(n,o){a=t[e]=[n,o]}));o.push(a[2]=i);var s=n.p+n.u(e),l=new Error,r=function(o){if(n.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",l.name="ChunkLoadError",l.type=i,l.request=s,a[1](l)}};n.l(s,r,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,s=o[0],l=o[1],r=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(r)var u=r(n)}for(e&&e(o);c<s.length;c++)i=s[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(2159)}));o=n.O(o)})();
//# sourceMappingURL=app.b0918bc5.js.map