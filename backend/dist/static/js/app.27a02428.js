(function(){"use strict";var t={9190:function(t,e,n){var o=n(9963),i=n(6252);function a(t,e){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}var r=n(3744);const s={},l=(0,r.Z)(s,[["render",a]]);var u=l,c=n(2201);const d={class:"home"},p={class:"home_button"},h={class:"home_button"};function _(t,e,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",p,[(0,i._)("div",{onClick:e[0]||(e[0]=(...t)=>r.moveToCreate&&r.moveToCreate(...t))},"アノテーション作成")]),(0,i._)("div",h,[(0,i._)("div",{onClick:e[1]||(e[1]=(...t)=>r.moveToShow&&r.moveToShow(...t))},"アノテーション編集・ダウンロード")])])}n(7658);var v={data(){return{}},methods:{moveToCreate(){this.$router.push({path:"/create"})},moveToShow(){this.$router.push({path:"/show"})}}};const m=(0,r.Z)(v,[["render",_],["__scopeId","data-v-0639c41d"]]);var f=m;const g=(0,i._)("h3",null,"アノテーションを作成",-1),b={class:"form"},y=(0,i._)("div",null,"アノテーション名",-1),w={key:0},k=(0,i._)("div",null,"CSVファイルの選択",-1),C={key:1},j=(0,i._)("div",null,"画像ファイルの選択",-1),S={class:"check_image"},x=(0,i._)("span",{class:"checkbox_text"},"画像比較で登録",-1),T={key:0,class:"warn"},D={key:0},O=["disabled"],Z={key:1};function I(t,e,n,a,r,s){return(0,i.wg)(),(0,i.iD)("div",null,[g,(0,i._)("section",b,[(0,i._)("div",null,[y,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r.annotation_name=t)},null,512),[[o.nr,r.annotation_name]])]),r.isImage?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",w,[k,(0,i._)("input",{type:"file",name:"",placeholder:"CSVファイルを入力してください",id:"",onChange:e[1]||(e[1]=(...t)=>s.onFileChange&&s.onFileChange(...t))},null,32)])),r.isImage?((0,i.wg)(),(0,i.iD)("div",C,[j,(0,i._)("input",{type:"file",accept:"application/zip,application/x-zip-compressed",placeholder:"画像ファイルをzip形式で圧縮して入力したください",name:"",id:"",onChange:e[2]||(e[2]=(...t)=>s.onZipFileChange&&s.onZipFileChange(...t))},null,32)])):(0,i.kq)("",!0),(0,i._)("div",S,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=t=>r.isImage=t),name:"",id:""},null,512),[[o.e8,r.isImage]]),x,r.isImage?((0,i.wg)(),(0,i.iD)("div",T," ※画像はzipファイルに圧縮してから送信してください ")):(0,i.kq)("",!0)]),(0,i._)("button",{onClick:e[4]||(e[4]=(...t)=>s.save&&s.save(...t))},"送信")]),r.annotation_id?((0,i.wg)(),(0,i.iD)("div",D,"アノテーション作成に成功しました")):(0,i.kq)("",!0),(0,i._)("button",{onClick:e[5]||(e[5]=(...t)=>s.backToHome&&s.backToHome(...t)),disabled:r.isSaving},"メニューへ戻る",8,O),r.error&&!r.annotation_id?((0,i.wg)(),(0,i.iD)("div",Z,"エラー")):(0,i.kq)("",!0)])}var A=n(8433);const F="http://127.0.0.1:5000";var z={data(){return{uploaded_file:null,uploaded_zip:null,annotation_name:"",file:null,isSaving:!1,annotation_id:null,error:!1,error_msg:"",isImage:!1}},methods:{async onFileChange(t){let e=t.target.files[0];this.file=e,this.createFile(e)},async createFile(t){var e=new FileReader;e.onload=t=>{this.uploaded_file=t.target.result},e.readAsDataURL(t)},onZipFileChange(t){let e=t.target.files[0];this.file=e,this.createZipFile(e)},async createZipFile(t){var e=new FileReader;e.onload=t=>{this.uploaded_zip=t.target.result},e.readAsDataURL(t)},async save(){this.isSaving=!0;const t=new FormData;t.append("file",this.uploaded_file),t.append("title",this.annotation_name),this.isImage&&t.append("image",this.uploaded_zip),t.append("isImage",+this.isImage);try{const e=await A.Z.post(F+"/api/reg_file",t,{headers:{"Content-Type":"multipart/form-data"}});this.annotation_id=e.data}catch(e){this.error=!0}finally{this.isSaving=!1}},backToHome(){this.$router.push({path:"/"})}}};const E=(0,r.Z)(z,[["render",I]]);var V=E,$=n(3577);const J=t=>((0,i.dD)("data-v-2728b945"),t=t(),(0,i.Cn)(),t),L=J((()=>(0,i._)("h3",null,"アノテーション一覧",-1))),R={class:"table"},U={border:"1"},q=J((()=>(0,i._)("tr",null,[(0,i._)("td"),(0,i._)("td",null,"作成日"),(0,i._)("td",null,"名前"),(0,i._)("td",null,[(0,i._)("div",null,"編集")]),(0,i._)("td",null,"CSV作成"),(0,i._)("td",null,"CSVダウンロード")],-1))),P=["onClick"],N=["onClick"],H=["onClick"];function G(t,e,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",null,[L,(0,i._)("div",R,[(0,i._)("table",U,[q,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.annotation_list,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:e},[(0,i._)("td",null,(0,$.zw)(e),1),(0,i._)("td",null,(0,$.zw)(t.generated_time),1),(0,i._)("td",null,(0,$.zw)(t.annotation_name),1),(0,i._)("td",null,[(0,i._)("button",{onClick:e=>r.moveToEdit(t.annotation_id)}," 編集 ",8,P)]),(0,i._)("td",null,[(0,i._)("button",{onClick:e=>r.createResult(t.annotation_id)}," 作成 ",8,N)]),(0,i._)("td",null,[(0,i._)("button",{onClick:e=>r.getCSV(t.annotation_id)}," ダウンロード ",8,H)])])))),128))])])])])}var M=n(6884),B=n.n(M),K=n(8874);const Y="https://dr832vdhbi.execute-api.us-east-1.amazonaws.com/prod/",Q="http://127.0.0.1:5000";var W={data(){return{annotation_list:[],error:!1}},methods:{async getAllAnotation(){try{const t=await A.Z.get(Y+"annotation");this.annotation_list=JSON.parse(t.data.annotation_table_data)}catch(t){console.log(t),(0,K.Am)(t,{autoClose:1e3}),this.error=!0}},moveToEdit(t){this.$router.push({path:"/edit/"+t})},createResult(t){A.Z.post(Y+"result",{annotation_id:t}).then((()=>{})).catch((t=>{(0,K.Am)(t),console.log(t)}))},async getCSV(t){try{const e=await A.Z.get(Q+`/api/get_csv?annotationId=${t}`,{responseType:"blob"}),n=e.headers["content-type"],o=e.headers["content-disposition"],i=new Blob([e.data],{type:n});B().saveAs(i,o)}catch(e){console.log("hello"),console.log(e),(0,K.Am)("csvファイルが存在しません",{autoClose:1e3})}}},created(){this.getAllAnotation()},computed:{showArray(){const t=this.annotation_list.length>50?50:this.annotation_list.length-1,e=this.annotation_list.slice(0,t);return e}}};const X=(0,r.Z)(W,[["render",G],["__scopeId","data-v-2728b945"]]);var tt=X;const et={key:0,class:"edit_area"},nt=["disabled"];function ot(t,e,n,o,a,r){const s=(0,i.up)("EditJob"),l=(0,i.up)("EditImageJob");return a.jobList?((0,i.wg)(),(0,i.iD)("div",et,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.jobList,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"form"},[t.isImage?((0,i.wg)(),(0,i.j4)(l,{key:1,index:e,job:t,onSave:e=>r.getResult(t,e)},null,8,["index","job","onSave"])):((0,i.wg)(),(0,i.j4)(s,{key:0,index:e,job:t,onSave:e=>r.getResult(t,e)},null,8,["index","job","onSave"]))])))),128)),(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>r.sendJob&&r.sendJob(...t)),disabled:a.isSending},"送信",8,nt)])):(0,i.kq)("",!0)}const it={class:"form"},at=["name"],rt=["name"];function st(t,e,n,a,r,s){return(0,i.wg)(),(0,i.iD)("div",it,[(0,i.wy)((0,i._)("input",{type:"radio",name:"check_job"+n.index,value:"0","onUpdate:modelValue":e[0]||(e[0]=t=>r.result_str=t),onClick:e[1]||(e[1]=t=>s.save(0))},null,8,at),[[o.G2,r.result_str]]),(0,i._)("div",null,(0,$.zw)(n.job.content_0),1),(0,i.wy)((0,i._)("input",{type:"radio",name:"check_job"+n.index,value:"1","onUpdate:modelValue":e[2]||(e[2]=t=>r.result_str=t),onClick:e[3]||(e[3]=t=>s.save(1))},null,8,rt),[[o.G2,r.result_str]]),(0,i._)("div",null,(0,$.zw)(n.job.content_1),1)])}var lt={props:{index:{type:Number},job:{type:Object}},data(){return{result_str:null}},methods:{save(t){const e=this.result===t?null:t;this.unSelected(t),this.$emit("save",e)},unSelected(t){this.result_str&&this.result_str===`${t}`&&(this.result_str=null)}},computed:{result(){return this.result_str?+this.result_str:null}}};const ut=(0,r.Z)(lt,[["render",st],["__scopeId","data-v-7d1c17ef"]]);var ct=ut;const dt={class:"form"},pt=["name"],ht={class:"image_container"},_t=["src"],vt=["name"],mt={class:"image_container"},ft=["src"];function gt(t,e,n,a,r,s){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",dt,[(0,i.wy)((0,i._)("input",{type:"radio",name:"check_job"+n.index,value:"0","onUpdate:modelValue":e[0]||(e[0]=t=>r.result_str=t),onClick:e[1]||(e[1]=t=>s.save(0))},null,8,pt),[[o.G2,r.result_str]]),(0,i._)("div",ht,[(0,i._)("img",{class:"image",src:n.job.content_0,alt:""},null,8,_t)]),(0,i.wy)((0,i._)("input",{type:"radio",name:"check_job"+n.index,"onUpdate:modelValue":e[2]||(e[2]=t=>r.result_str=t),value:"1",onClick:e[3]||(e[3]=t=>s.save(1))},null,8,vt),[[o.G2,r.result_str]]),(0,i._)("div",mt,[(0,i._)("img",{class:"image",src:n.job.content_1,alt:""},null,8,ft)])])])}var bt={props:{index:{type:Number,default:null},job:{type:Object,default:()=>({})}},data(){return{result_str:null}},methods:{save(t){const e=this.result===t?null:t;this.unSelected(t),this.$emit("save",e)},unselected(t){this.result_str&&this.result_str===`${t}`&&(this.result_str=null)}},computed:{result(){return this.result_str?+this.result_str:null}}};const yt=(0,r.Z)(bt,[["render",gt],["__scopeId","data-v-7f1e7328"]]);var wt=yt;const kt="https://dr832vdhbi.execute-api.us-east-1.amazonaws.com/prod/";var Ct={components:{EditJob:ct,EditImageJob:wt},data(){return{jobList:[],isSending:!1}},methods:{getResult(t,e){t.result=e},async getJob(t){const e=await A.Z.get(kt+"job?annotation_id="+t);console.log(e),this.jobList=[this.jobList,...e.data.response_list]},async sendJob(){this.isSending=!0;try{const t=await A.Z.patch(kt+"job",{response_list:this.jobList});console.log(t)}catch(t){alert("エラーが発生しました")}finally{this.isSending=!1}}},async created(){const t=this.$route.params.annotation_id;await this.getJob(t),this.$nextTick((function(){}))}};const jt=(0,r.Z)(Ct,[["render",ot]]);var St=jt;const xt=[{path:"/",name:"home",component:f},{path:"/about",name:"about",component:()=>n.e(443).then(n.bind(n,7381))},{path:"/create",name:"create",component:V},{path:"/show",name:"show",component:tt},{path:"/edit/:annotation_id",name:"edit",component:St}],Tt=(0,c.p7)({history:(0,c.PO)("/"),routes:xt});var Dt=Tt;(0,o.ri)(u).use(Dt).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,a){if(!o){var r=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],a=t[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(s=!1,a<r&&(r=a));if(s){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,i,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"static/js/about.70f723e8.js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="frontend:";n.l=function(o,i,a,r){if(t[o])t[o].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=o),t[o]=[i];var p=function(e,n){s.onerror=s.onload=null,clearTimeout(h);var i=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(n)})),e)return e(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t={143:0};n.f.j=function(e,o){var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)o.push(i[2]);else{var a=new Promise((function(n,o){i=t[e]=[n,o]}));o.push(i[2]=a);var r=n.p+n.u(e),s=new Error,l=function(o){if(n.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var a=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",s.name="ChunkLoadError",s.type=a,s.request=r,i[1](s)}};n.l(r,l,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,a,r=o[0],s=o[1],l=o[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var c=l(n)}for(e&&e(o);u<r.length;u++)a=r[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9190)}));o=n.O(o)})();
//# sourceMappingURL=app.27a02428.js.map